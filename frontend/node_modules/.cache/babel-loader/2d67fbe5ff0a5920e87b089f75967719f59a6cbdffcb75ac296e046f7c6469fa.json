{"ast":null,"code":"import React,{useState,useEffect}from'react';import styled from'styled-components';import{buscarTrabalhos,buscarODS}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchWrapper=styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-top: 150px;\n`;const SearchInput=styled.input`\n  width: 600px;\n  padding: 15px;\n  font-size: 18px;\n  border: 2px solid #ddd;\n  border-radius: 24px;\n  margin-bottom: 20px;\n`;const SearchButton=styled.button`\n  padding: 10px 20px;\n  background-color: #4285f4;\n  color: white;\n  border: none;\n  border-radius: 24px;\n  cursor: pointer;\n  font-size: 16px;\n\n  &:hover {\n    background-color: #357ae8;\n  }\n`;const TagsWrapper=styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin: 20px 0; /* Espaçamento entre as tags e o botão */\n`;const Tag=styled.span`\n  background-color: ${_ref=>{let{color}=_ref;return color||'#f1f3f4';}};\n  color: #fff;\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: 14px;\n  cursor: pointer;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;function SearchBar(_ref2){let{onResults}=_ref2;const[query,setQuery]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[tags,setTags]=useState([]);const[tagColors,setTagColors]=useState([]);// Define as cores fixas\nconst fixedColors=['#FF5733','#4285F4','#FFA500','#34A853','#F5DEB3'];// Vermelho, Azul, Laranja, Verde, Bege\n// Carregar dados iniciais (tags) ao montar o componente\nuseEffect(()=>{const carregarODS=async()=>{try{const resultados=await buscarODS();// Busca dados da API\nconst odsTags=[];resultados.forEach(item=>{if(item.palavras_chave){odsTags.push(...item.palavras_chave);}else if(item.titulo){odsTags.push(item.titulo);}});setTags([...new Set(odsTags)].slice(0,5));// Remove duplicatas e exibe no máximo 5 tags\n// Associa cores únicas às tags\nconst shuffledColors=[...fixedColors].sort(()=>Math.random()-0.5);// Embaralha as cores\nsetTagColors(shuffledColors.slice(0,odsTags.length));// Atribui cores até o número de tags\n}catch(err){console.error('Erro ao carregar dados iniciais:',err);setError('Erro ao carregar dados iniciais.');}};carregarODS();},[]);// Função de busca\nconst handleSearch=async function(){let searchQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:query;setLoading(true);setError(null);try{const params={palavra_resumo:searchQuery};// Usa o termo de busca\nconst resultados=await buscarTrabalhos(params);// Realiza a busca\nonResults(resultados);// Envia os resultados ao componente pai\n}catch(err){setError('Erro ao buscar trabalhos. Tente novamente.');}finally{setLoading(false);}};// Função para buscar ao clicar em uma tag\nconst handleTagClick=tag=>{setQuery(tag);// Define a tag como valor do campo de busca\nhandleSearch(tag);// Realiza a busca automaticamente\n};return/*#__PURE__*/_jsxs(SearchWrapper,{children:[/*#__PURE__*/_jsx(SearchInput,{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Digite sua busca (ex.: dignidade, previd\\xEAncia)...\"}),/*#__PURE__*/_jsx(SearchButton,{onClick:()=>handleSearch(query),disabled:loading,children:loading?'Buscando...':'Pesquisar'}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),tags.length>0?/*#__PURE__*/_jsx(TagsWrapper,{children:tags.map((tag,index)=>/*#__PURE__*/_jsx(Tag,{onClick:()=>handleTagClick(tag),color:tagColors[index%tagColors.length]// Cores dinâmicas\n,children:tag},index))}):/*#__PURE__*/_jsx(\"p\",{style:{color:'#888',marginTop:'20px'},children:\"Carregando tags...\"})]});}export default SearchBar;","map":{"version":3,"names":["React","useState","useEffect","styled","buscarTrabalhos","buscarODS","jsx","_jsx","jsxs","_jsxs","SearchWrapper","div","SearchInput","input","SearchButton","button","TagsWrapper","Tag","span","_ref","color","SearchBar","_ref2","onResults","query","setQuery","loading","setLoading","error","setError","tags","setTags","tagColors","setTagColors","fixedColors","carregarODS","resultados","odsTags","forEach","item","palavras_chave","push","titulo","Set","slice","shuffledColors","sort","Math","random","length","err","console","handleSearch","searchQuery","arguments","undefined","params","palavra_resumo","handleTagClick","tag","children","type","value","onChange","e","target","placeholder","onClick","disabled","style","map","index","marginTop"],"sources":["C:/Users/Inteli/Desktop/Fran_Dê/Projeto_Jefferson/search-system/src/components/SearchBar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { buscarTrabalhos, buscarODS } from '../api';\r\n\r\n\r\nconst SearchWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 150px;\r\n`;\r\n\r\nconst SearchInput = styled.input`\r\n  width: 600px;\r\n  padding: 15px;\r\n  font-size: 18px;\r\n  border: 2px solid #ddd;\r\n  border-radius: 24px;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst SearchButton = styled.button`\r\n  padding: 10px 20px;\r\n  background-color: #4285f4;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 24px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n\r\n  &:hover {\r\n    background-color: #357ae8;\r\n  }\r\n`;\r\n\r\nconst TagsWrapper = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n  margin: 20px 0; /* Espaçamento entre as tags e o botão */\r\n`;\r\n\r\nconst Tag = styled.span`\r\n  background-color: ${({ color }) => color || '#f1f3f4'};\r\n  color: #fff;\r\n  padding: 8px 16px;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    opacity: 0.8;\r\n  }\r\n`;\r\n\r\nfunction SearchBar({ onResults }) {\r\n  const [query, setQuery] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [tags, setTags] = useState([]);\r\n  const [tagColors, setTagColors] = useState([]);\r\n\r\n  // Define as cores fixas\r\n  const fixedColors = ['#FF5733', '#4285F4', '#FFA500', '#34A853', '#F5DEB3']; // Vermelho, Azul, Laranja, Verde, Bege\r\n\r\n  // Carregar dados iniciais (tags) ao montar o componente\r\n  useEffect(() => {\r\n    const carregarODS = async () => {\r\n      try {\r\n        const resultados = await buscarODS(); // Busca dados da API\r\n        const odsTags = [];\r\n        resultados.forEach((item) => {\r\n          if (item.palavras_chave) {\r\n            odsTags.push(...item.palavras_chave);\r\n          } else if (item.titulo) {\r\n            odsTags.push(item.titulo);\r\n          }\r\n        });\r\n\r\n        setTags([...new Set(odsTags)].slice(0, 5)); // Remove duplicatas e exibe no máximo 5 tags\r\n\r\n        // Associa cores únicas às tags\r\n        const shuffledColors = [...fixedColors].sort(() => Math.random() - 0.5); // Embaralha as cores\r\n        setTagColors(shuffledColors.slice(0, odsTags.length)); // Atribui cores até o número de tags\r\n      } catch (err) {\r\n        console.error('Erro ao carregar dados iniciais:', err);\r\n        setError('Erro ao carregar dados iniciais.');\r\n      }\r\n    };\r\n\r\n    carregarODS();\r\n  }, []);\r\n\r\n  // Função de busca\r\n  const handleSearch = async (searchQuery = query) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const params = { palavra_resumo: searchQuery }; // Usa o termo de busca\r\n      const resultados = await buscarTrabalhos(params); // Realiza a busca\r\n      onResults(resultados); // Envia os resultados ao componente pai\r\n    } catch (err) {\r\n      setError('Erro ao buscar trabalhos. Tente novamente.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Função para buscar ao clicar em uma tag\r\n  const handleTagClick = (tag) => {\r\n    setQuery(tag); // Define a tag como valor do campo de busca\r\n    handleSearch(tag); // Realiza a busca automaticamente\r\n  };\r\n\r\n  return (\r\n    <SearchWrapper>\r\n      <SearchInput\r\n        type=\"text\"\r\n        value={query}\r\n        onChange={(e) => setQuery(e.target.value)}\r\n        placeholder=\"Digite sua busca (ex.: dignidade, previdência)...\"\r\n      />\r\n      <SearchButton onClick={() => handleSearch(query)} disabled={loading}>\r\n        {loading ? 'Buscando...' : 'Pesquisar'}\r\n      </SearchButton>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n      {/* Exibe as tags carregadas da API */}\r\n      {tags.length > 0 ? (\r\n        <TagsWrapper>\r\n          {tags.map((tag, index) => (\r\n            <Tag\r\n              key={index}\r\n              onClick={() => handleTagClick(tag)}\r\n              color={tagColors[index % tagColors.length]} // Cores dinâmicas\r\n            >\r\n              {tag}\r\n            </Tag>\r\n          ))}\r\n        </TagsWrapper>\r\n      ) : (\r\n        <p style={{ color: '#888', marginTop: '20px' }}>Carregando tags...</p>\r\n      )}\r\n    </SearchWrapper>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,OAASC,eAAe,CAAEC,SAAS,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGpD,KAAM,CAAAC,aAAa,CAAGP,MAAM,CAACQ,GAAG;AAChC;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGT,MAAM,CAACU,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGX,MAAM,CAACY,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGb,MAAM,CAACQ,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAM,GAAG,CAAGd,MAAM,CAACe,IAAI;AACvB,sBAAsBC,IAAA,MAAC,CAAEC,KAAM,CAAC,CAAAD,IAAA,OAAK,CAAAC,KAAK,EAAI,SAAS;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,QAAS,CAAAC,SAASA,CAAAC,KAAA,CAAgB,IAAf,CAAEC,SAAU,CAAC,CAAAD,KAAA,CAC9B,KAAM,CAACE,KAAK,CAAEC,QAAQ,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACyB,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC2B,KAAK,CAAEC,QAAQ,CAAC,CAAG5B,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAC6B,IAAI,CAAEC,OAAO,CAAC,CAAG9B,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAC+B,SAAS,CAAEC,YAAY,CAAC,CAAGhC,QAAQ,CAAC,EAAE,CAAC,CAE9C;AACA,KAAM,CAAAiC,WAAW,CAAG,CAAC,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAC,CAAE;AAE7E;AACAhC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiC,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAA/B,SAAS,CAAC,CAAC,CAAE;AACtC,KAAM,CAAAgC,OAAO,CAAG,EAAE,CAClBD,UAAU,CAACE,OAAO,CAAEC,IAAI,EAAK,CAC3B,GAAIA,IAAI,CAACC,cAAc,CAAE,CACvBH,OAAO,CAACI,IAAI,CAAC,GAAGF,IAAI,CAACC,cAAc,CAAC,CACtC,CAAC,IAAM,IAAID,IAAI,CAACG,MAAM,CAAE,CACtBL,OAAO,CAACI,IAAI,CAACF,IAAI,CAACG,MAAM,CAAC,CAC3B,CACF,CAAC,CAAC,CAEFX,OAAO,CAAC,CAAC,GAAG,GAAI,CAAAY,GAAG,CAACN,OAAO,CAAC,CAAC,CAACO,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAAE;AAE5C;AACA,KAAM,CAAAC,cAAc,CAAG,CAAC,GAAGX,WAAW,CAAC,CAACY,IAAI,CAAC,IAAMC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAC,CAAE;AACzEf,YAAY,CAACY,cAAc,CAACD,KAAK,CAAC,CAAC,CAAEP,OAAO,CAACY,MAAM,CAAC,CAAC,CAAE;AACzD,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACvB,KAAK,CAAC,kCAAkC,CAAEsB,GAAG,CAAC,CACtDrB,QAAQ,CAAC,kCAAkC,CAAC,CAC9C,CACF,CAAC,CAEDM,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAiB,YAAY,CAAG,cAAAA,CAAA,CAA+B,IAAxB,CAAAC,WAAW,CAAAC,SAAA,CAAAL,MAAA,IAAAK,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG9B,KAAK,CAC7CG,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,GAAI,CACF,KAAM,CAAA2B,MAAM,CAAG,CAAEC,cAAc,CAAEJ,WAAY,CAAC,CAAE;AAChD,KAAM,CAAAjB,UAAU,CAAG,KAAM,CAAAhC,eAAe,CAACoD,MAAM,CAAC,CAAE;AAClDjC,SAAS,CAACa,UAAU,CAAC,CAAE;AACzB,CAAE,MAAOc,GAAG,CAAE,CACZrB,QAAQ,CAAC,4CAA4C,CAAC,CACxD,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED;AACA,KAAM,CAAA+B,cAAc,CAAIC,GAAG,EAAK,CAC9BlC,QAAQ,CAACkC,GAAG,CAAC,CAAE;AACfP,YAAY,CAACO,GAAG,CAAC,CAAE;AACrB,CAAC,CAED,mBACElD,KAAA,CAACC,aAAa,EAAAkD,QAAA,eACZrD,IAAA,CAACK,WAAW,EACViD,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEtC,KAAM,CACbuC,QAAQ,CAAGC,CAAC,EAAKvC,QAAQ,CAACuC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC1CI,WAAW,CAAC,sDAAmD,CAChE,CAAC,cACF3D,IAAA,CAACO,YAAY,EAACqD,OAAO,CAAEA,CAAA,GAAMf,YAAY,CAAC5B,KAAK,CAAE,CAAC4C,QAAQ,CAAE1C,OAAQ,CAAAkC,QAAA,CACjElC,OAAO,CAAG,aAAa,CAAG,WAAW,CAC1B,CAAC,CACdE,KAAK,eAAIrB,IAAA,MAAG8D,KAAK,CAAE,CAAEjD,KAAK,CAAE,KAAM,CAAE,CAAAwC,QAAA,CAAEhC,KAAK,CAAI,CAAC,CAGhDE,IAAI,CAACmB,MAAM,CAAG,CAAC,cACd1C,IAAA,CAACS,WAAW,EAAA4C,QAAA,CACT9B,IAAI,CAACwC,GAAG,CAAC,CAACX,GAAG,CAAEY,KAAK,gBACnBhE,IAAA,CAACU,GAAG,EAEFkD,OAAO,CAAEA,CAAA,GAAMT,cAAc,CAACC,GAAG,CAAE,CACnCvC,KAAK,CAAEY,SAAS,CAACuC,KAAK,CAAGvC,SAAS,CAACiB,MAAM,CAAG;AAAA,CAAAW,QAAA,CAE3CD,GAAG,EAJCY,KAKF,CACN,CAAC,CACS,CAAC,cAEdhE,IAAA,MAAG8D,KAAK,CAAE,CAAEjD,KAAK,CAAE,MAAM,CAAEoD,SAAS,CAAE,MAAO,CAAE,CAAAZ,QAAA,CAAC,oBAAkB,CAAG,CACtE,EACY,CAAC,CAEpB,CAEA,cAAe,CAAAvC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}