{"ast":null,"code":"import React,{useState,useEffect}from'react';import styled from'styled-components';import{buscarTrabalhos,buscarODS}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchWrapper=styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  margin-top: 150px;\n`;const SearchInput=styled.input`\n  width: 600px;\n  padding: 15px;\n  font-size: 18px;\n  border: 2px solid #ddd;\n  border-radius: 24px;\n  margin-bottom: 20px;\n`;const SearchButton=styled.button`\n  padding: 10px 20px;\n  background-color: #4285f4;\n  color: white;\n  border: none;\n  border-radius: 24px;\n  cursor: pointer;\n  font-size: 16px;\n\n  &:hover {\n    background-color: #357ae8;\n  }\n`;const TagsWrapper=styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin: 20px 0; /* Espaçamento entre as tags e o botão */\n`;const Tag=styled.span`\n  background-color: ${_ref=>{let{color}=_ref;return color||'#f1f3f4';}};\n  color: #fff;\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: 14px;\n  cursor: pointer;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;function SearchBar(_ref2){let{onResults}=_ref2;const[query,setQuery]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[tags,setTags]=useState([]);const[tagColors,setTagColors]=useState([]);// Cores fixas para as tags\nconst fixedColors=['#FF5733','#4285F4','#FFA500','#34A853','#800080'];// Carregar dados iniciais (tags)\nuseEffect(()=>{const carregarODS=async()=>{try{const resultados=await buscarODS();const odsTags=[];resultados.forEach(item=>{if(item.palavras_chave){odsTags.push(...item.palavras_chave);}});setTags([...new Set(odsTags)].slice(0,5));// Remove duplicatas\nconst shuffledColors=[...fixedColors].sort(()=>Math.random()-0.5);setTagColors(shuffledColors.slice(0,odsTags.length));}catch(err){console.error('Erro ao carregar dados iniciais:',err);setError('Erro ao carregar dados iniciais.');}};carregarODS();},[]);// Função de busca\nuseEffect(()=>{if(query){handleSearch(query);// Chama a busca sempre que a query muda\n}},[query]);// Executa quando `query` muda\nconst handleSearch=async function(){let searchQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:query;setLoading(true);setError(null);try{const params={palavra_resumo:searchQuery};const resultados=await buscarTrabalhos(params);onResults(resultados);}catch(err){setError('Erro ao buscar trabalhos. Tente novamente.');}finally{setLoading(false);}};const handleTagClick=tag=>{setQuery(tag);// Atualiza a query (useEffect lidará com a busca)\n};return/*#__PURE__*/_jsxs(SearchWrapper,{children:[/*#__PURE__*/_jsx(SearchInput,{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Digite sua busca (ex.: dignidade, previd\\xEAncia)...\"}),/*#__PURE__*/_jsx(SearchButton,{onClick:()=>handleSearch(query),disabled:loading,children:loading?'Buscando...':'Pesquisar'}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsx(TagsWrapper,{children:tags.map((tag,index)=>/*#__PURE__*/_jsx(Tag,{onClick:()=>handleTagClick(tag),color:tagColors[index%tagColors.length],children:tag},index))})]});}export default SearchBar;","map":{"version":3,"names":["React","useState","useEffect","styled","buscarTrabalhos","buscarODS","jsx","_jsx","jsxs","_jsxs","SearchWrapper","div","SearchInput","input","SearchButton","button","TagsWrapper","Tag","span","_ref","color","SearchBar","_ref2","onResults","query","setQuery","loading","setLoading","error","setError","tags","setTags","tagColors","setTagColors","fixedColors","carregarODS","resultados","odsTags","forEach","item","palavras_chave","push","Set","slice","shuffledColors","sort","Math","random","length","err","console","handleSearch","searchQuery","arguments","undefined","params","palavra_resumo","handleTagClick","tag","children","type","value","onChange","e","target","placeholder","onClick","disabled","style","map","index"],"sources":["C:/Users/Inteli/Desktop/Fran_Dê/Projeto_Jefferson/search-system/src/components/SearchBar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { buscarTrabalhos, buscarODS } from '../api';\r\n\r\nconst SearchWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 150px;\r\n`;\r\n\r\nconst SearchInput = styled.input`\r\n  width: 600px;\r\n  padding: 15px;\r\n  font-size: 18px;\r\n  border: 2px solid #ddd;\r\n  border-radius: 24px;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst SearchButton = styled.button`\r\n  padding: 10px 20px;\r\n  background-color: #4285f4;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 24px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n\r\n  &:hover {\r\n    background-color: #357ae8;\r\n  }\r\n`;\r\n\r\nconst TagsWrapper = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n  margin: 20px 0; /* Espaçamento entre as tags e o botão */\r\n`;\r\n\r\nconst Tag = styled.span`\r\n  background-color: ${({ color }) => color || '#f1f3f4'};\r\n  color: #fff;\r\n  padding: 8px 16px;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    opacity: 0.8;\r\n  }\r\n`;\r\n\r\nfunction SearchBar({ onResults }) {\r\n  const [query, setQuery] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [tags, setTags] = useState([]);\r\n  const [tagColors, setTagColors] = useState([]);\r\n\r\n  // Cores fixas para as tags\r\n  const fixedColors = ['#FF5733', '#4285F4', '#FFA500', '#34A853', '#800080'];\r\n\r\n  // Carregar dados iniciais (tags)\r\n  useEffect(() => {\r\n    const carregarODS = async () => {\r\n      try {\r\n        const resultados = await buscarODS();\r\n        const odsTags = [];\r\n        resultados.forEach((item) => {\r\n          if (item.palavras_chave) {\r\n            odsTags.push(...item.palavras_chave);\r\n          }\r\n        });\r\n\r\n        setTags([...new Set(odsTags)].slice(0, 5)); // Remove duplicatas\r\n        const shuffledColors = [...fixedColors].sort(() => Math.random() - 0.5);\r\n        setTagColors(shuffledColors.slice(0, odsTags.length));\r\n      } catch (err) {\r\n        console.error('Erro ao carregar dados iniciais:', err);\r\n        setError('Erro ao carregar dados iniciais.');\r\n      }\r\n    };\r\n\r\n    carregarODS();\r\n  }, []);\r\n\r\n  // Função de busca\r\n  useEffect(() => {\r\n    if (query) {\r\n      handleSearch(query); // Chama a busca sempre que a query muda\r\n    }\r\n  }, [query]); // Executa quando `query` muda\r\n\r\n  const handleSearch = async (searchQuery = query) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const params = { palavra_resumo: searchQuery };\r\n      const resultados = await buscarTrabalhos(params);\r\n      onResults(resultados);\r\n    } catch (err) {\r\n      setError('Erro ao buscar trabalhos. Tente novamente.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTagClick = (tag) => {\r\n    setQuery(tag); // Atualiza a query (useEffect lidará com a busca)\r\n  };\r\n\r\n  return (\r\n    <SearchWrapper>\r\n      <SearchInput\r\n        type=\"text\"\r\n        value={query}\r\n        onChange={(e) => setQuery(e.target.value)}\r\n        placeholder=\"Digite sua busca (ex.: dignidade, previdência)...\"\r\n      />\r\n      <SearchButton onClick={() => handleSearch(query)} disabled={loading}>\r\n        {loading ? 'Buscando...' : 'Pesquisar'}\r\n      </SearchButton>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n      {/* Exibe as tags */}\r\n      <TagsWrapper>\r\n        {tags.map((tag, index) => (\r\n          <Tag\r\n            key={index}\r\n            onClick={() => handleTagClick(tag)}\r\n            color={tagColors[index % tagColors.length]}\r\n          >\r\n            {tag}\r\n          </Tag>\r\n        ))}\r\n      </TagsWrapper>\r\n    </SearchWrapper>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}